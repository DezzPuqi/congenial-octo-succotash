<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Request Monitor</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f8f9fa;
    padding: 20px;
  }
  .card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    width: 360px;
  }
  #log {
    margin-top: 16px;
    padding: 10px;
    background: #eee;
    border-radius: 6px;
    height: 150px;
    overflow-y: auto;
    font-size: 14px;
  }
</style>
</head>
<body>
<div class="card">
  <h2>Request Monitor</h2>
  <div>Total Requests: <span id="total">0</span></div>
  <div>Your Requests: <span id="mine">0</span></div>
  <div>Your IP: <span id="ip">-</span></div>

  <button id="pingBtn">Send Request</button>

  <div id="log"></div>
</div>

<script>
async function ping() {
  const res = await fetch("/api/hit");
  const data = await res.json();

  document.getElementById("total").textContent = data.totalRequests;
  document.getElementById("mine").textContent = data.requestsByIP;
  document.getElementById("ip").textContent = data.yourIP;

  const log = document.getElementById("log");
  log.innerHTML += `Hit @ ${new Date().toLocaleTimeString()} â€” Total: ${data.totalRequests}<br>`;
  log.scrollTop = log.scrollHeight;
}

document.getElementById("pingBtn").onclick = ping;
</script>
</body>
  </html>
